<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <!-- Character encoding and viewport configuration -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <!-- Primary Meta Tags -->
    <meta name="description" content="Modern web-based platform for educational enrollment management">
    <meta name="theme-color" content="#1976D2" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'nonce-${nonce}' 'strict-dynamic'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://api.enrollment-system.com;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()">
    
    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/logo192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/logo512.png">
    
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://api.enrollment-system.com" crossorigin>
    <link rel="preload" href="/src/main.tsx" as="script" type="module">
    
    <!-- Offline Support -->
    <link rel="prefetch" href="/offline.html">
    
    <title>Enrollment System</title>
    
    <!-- Critical CSS Inline -->
    <style>
        /* Initial loading state styles */
        .initial-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--background-color, #ffffff);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        /* No JavaScript fallback */
        .no-js-message {
            display: none;
        }
        
        html.no-js .no-js-message {
            display: block;
            padding: 20px;
            text-align: center;
            background-color: #f44336;
            color: white;
        }
        
        /* High contrast mode support */
        @media (forced-colors: active) {
            :root {
                --primary-color: CanvasText;
                --background-color: Canvas;
            }
        }
    </style>
    
    <!-- Remove no-js class if JavaScript is enabled -->
    <script nonce="${nonce}">
        document.documentElement.classList.remove('no-js');
    </script>
</head>
<body>
    <!-- No JavaScript Warning -->
    <noscript>
        <div class="no-js-message" role="alert">
            JavaScript is required to use the Enrollment System. Please enable JavaScript in your browser settings.
        </div>
    </noscript>
    
    <!-- Skip to main content link for keyboard navigation -->
    <a href="#root" class="visually-hidden">
        Skip to main content
    </a>
    
    <!-- Application Root -->
    <div id="root" role="application" aria-label="Enrollment System Application">
        <!-- Initial Loading State -->
        <div class="initial-loader" role="progressbar" aria-label="Loading application">
            <svg width="50" height="50" viewBox="0 0 50 50" aria-hidden="true">
                <circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5"></circle>
            </svg>
        </div>
    </div>
    
    <!-- Application Entry Point -->
    <script type="module" src="/src/main.tsx" nonce="${nonce}" defer></script>
    
    <!-- Offline Support -->
    <script nonce="${nonce}">
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js', {
                    scope: '/'
                }).then(registration => {
                    console.debug('ServiceWorker registration successful');
                }).catch(error => {
                    console.error('ServiceWorker registration failed:', error);
                });
            });
        }
    </script>
</body>
</html>